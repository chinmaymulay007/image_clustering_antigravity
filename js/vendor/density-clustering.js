/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/density-clustering@1.3.0/lib/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t={exports:{}},i={exports:{}};
/**
 * DBSCAN - Density based clustering
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
!function(t){function i(t,i,s,e){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,i,s,e)}i.prototype.run=function(t,i,s,e){this._init(t,i,s,e);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var n=this._regionQuery(r);if(n.length<this.minPts)this.noise.push(r);else{var o=this.clusters.length;this.clusters.push([]),this._addToCluster(r,o),this._expandCluster(o,n)}}return this.clusters},i.prototype._init=function(t,i,s,e){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}i&&(this.epsilon=i),s&&(this.minPts=s),e&&(this.distance=e)},i.prototype._expandCluster=function(t,i){for(var s=0;s<i.length;s++){var e=i[s];if(1!==this._visited[e]){this._visited[e]=1;var r=this._regionQuery(e);r.length>=this.minPts&&(i=this._mergeArrays(i,r))}1!==this._assigned[e]&&this._addToCluster(e,t)}},i.prototype._addToCluster=function(t,i){this.clusters[i].push(t),this._assigned[t]=1},i.prototype._regionQuery=function(t){for(var i=[],s=0;s<this._datasetLength;s++){this.distance(this.dataset[t],this.dataset[s])<this.epsilon&&i.push(s)}return i},i.prototype._mergeArrays=function(t,i){for(var s=i.length,e=0;e<s;e++){var r=i[e];t.indexOf(r)<0&&t.push(r)}return t},i.prototype._euclideanDistance=function(t,i){for(var s=0,e=Math.min(t.length,i.length);e--;)s+=(t[e]-i[e])*(t[e]-i[e]);return Math.sqrt(s)},t.exports&&(t.exports=i)}(i);var s={exports:{}};!function(t){
/**
 * KMEANS clustering
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
function i(t,i,s){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,i,s)}i.prototype.init=function(t,i,s){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==i&&(this.k=i),void 0!==s&&(this.distance=s)},i.prototype.run=function(t,i){this.init(t,i);for(var s=this.dataset.length,e=0;e<this.k;e++)this.centroids[e]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var n=0;n<this.k;n++){for(var o=new Array(p),h=0,a=0;a<p;a++)o[a]=0;for(var u=0;u<s;u++){var p=this.dataset[u].length;if(n===this.assignments[u]){for(a=0;a<p;a++)o[a]+=this.dataset[u][a];h++}}if(h>0){for(a=0;a<p;a++)o[a]/=h;this.centroids[n]=o}else this.centroids[n]=this.randomCentroid(),r=!0}}return this.getClusters()},i.prototype.randomCentroid=function(){var t,i,s=this.dataset.length-1;do{i=Math.round(Math.random()*s),t=this.dataset[i]}while(this.centroids.indexOf(t)>=0);return t},i.prototype.assign=function(){for(var t,i=!1,s=this.dataset.length,e=0;e<s;e++)(t=this.argmin(this.dataset[e],this.centroids,this.distance))!=this.assignments[e]&&(this.assignments[e]=t,i=!0);return i},i.prototype.getClusters=function(){for(var t,i=new Array(this.k),s=0;s<this.assignments.length;s++)void 0===i[t=this.assignments[s]]&&(i[t]=[]),i[t].push(s);return i},i.prototype.argmin=function(t,i,s){for(var e,r=Number.MAX_VALUE,n=0,o=i.length,h=0;h<o;h++)(e=s(t,i[h]))<r&&(r=e,n=h);return n},i.prototype.distance=function(t,i){for(var s=0,e=Math.min(t.length,i.length);e--;){var r=t[e]-i[e];s+=r*r}return Math.sqrt(s)},t.exports&&(t.exports=i)}(s);var e,r={exports:{}},n={exports:{}};
/**
 * PriorityQueue
 * Elements in this queue are sorted according to their value
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
!function(t){function i(t,i,s){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,i,s)}i.prototype.insert=function(t,i){for(var s=this._queue.length,e=s;e--;){var r=this._priorities[e];"desc"===this._sorting?i>r&&(s=e):i<r&&(s=e)}this._insertAt(t,i,s)},i.prototype.remove=function(t){for(var i=this._queue.length;i--;){if(t===this._queue[i]){this._queue.splice(i,1),this._priorities.splice(i,1);break}}},i.prototype.forEach=function(t){this._queue.forEach(t)},i.prototype.getElements=function(){return this._queue},i.prototype.getElementPriority=function(t){return this._priorities[t]},i.prototype.getPriorities=function(){return this._priorities},i.prototype.getElementsWithPriorities=function(){for(var t=[],i=0,s=this._queue.length;i<s;i++)t.push([this._queue[i],this._priorities[i]]);return t},i.prototype._init=function(t,i,s){if(t&&i){if(this._queue=[],this._priorities=[],t.length!==i.length)throw new Error("Arrays must have the same length");for(var e=0;e<t.length;e++)this.insert(t[e],i[e])}s&&(this._sorting=s)},i.prototype._insertAt=function(t,i,s){this._queue.length===s?(this._queue.push(t),this._priorities.push(i)):(this._queue.splice(s,0,t),this._priorities.splice(s,0,i))},t.exports&&(t.exports=i)}(n),function(t){if(t.exports)var i=n.exports;
/**
 * OPTICS - Ordering points to identify the clustering structure
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */function s(t,i,s,e){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,i,s,e)}s.prototype.run=function(t,s,e,r){this._init(t,s,e,r);for(var n=0,o=this.dataset.length;n<o;n++)if(1!==this._processed[n]){this._processed[n]=1,this.clusters.push([n]);var h=this.clusters.length-1;this._orderedList.push(n);var a=new i(null,null,"asc"),u=this._regionQuery(n);void 0!==this._distanceToCore(n)&&(this._updateQueue(n,u,a),this._expandCluster(h,a))}return this.clusters},s.prototype.getReachabilityPlot=function(){for(var t=[],i=0,s=this._orderedList.length;i<s;i++){var e=this._orderedList[i],r=this._reachability[e];t.push([e,r])}return t},s.prototype._init=function(t,i,s,e){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),s&&(this.minPts=s),e&&(this.distance=e)},s.prototype._updateQueue=function(t,i,s){var e=this;this._coreDistance=this._distanceToCore(t),i.forEach((function(i){if(void 0===e._processed[i]){var r=e.distance(e.dataset[t],e.dataset[i]),n=Math.max(e._coreDistance,r);void 0===e._reachability[i]?(e._reachability[i]=n,s.insert(i,n)):n<e._reachability[i]&&(e._reachability[i]=n,s.remove(i),s.insert(i,n))}}))},s.prototype._expandCluster=function(t,i){for(var s=i.getElements(),e=0,r=s.length;e<r;e++){var n=s[e];if(void 0===this._processed[n]){var o=this._regionQuery(n);this._processed[n]=1,this.clusters[t].push(n),this._orderedList.push(n),void 0!==this._distanceToCore(n)&&(this._updateQueue(n,o,i),this._expandCluster(t,i))}}},s.prototype._distanceToCore=function(t){for(var i=this.epsilon,s=0;s<i;s++){if(this._regionQuery(t,s).length>=this.minPts)return s}},s.prototype._regionQuery=function(t,i){i=i||this.epsilon;for(var s=[],e=0,r=this.dataset.length;e<r;e++)this.distance(this.dataset[t],this.dataset[e])<i&&s.push(e);return s},s.prototype._euclideanDistance=function(t,i){for(var s=0,e=Math.min(t.length,i.length);e--;)s+=(t[e]-i[e])*(t[e]-i[e]);return Math.sqrt(s)},t.exports&&(t.exports=s)}(r),(e=t).exports&&(e.exports={DBSCAN:i.exports,KMEANS:s.exports,OPTICS:r.exports,PriorityQueue:n.exports});var o=t.exports,h=t.exports.DBSCAN,a=t.exports.KMEANS,u=t.exports.OPTICS,p=t.exports.PriorityQueue;export{h as DBSCAN,a as KMEANS,u as OPTICS,p as PriorityQueue,o as default};
//# sourceMappingURL=/sm/9f04822e36b5f67cd68ef68a2fd8c44f2b5e36250d6d49ba3d6ef547a42a49b5.map